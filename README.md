# Elite: Dangerous リアルタイムダッシュボード

## 概要
このアプリケーションは、戦闘とマテリアル収集の統計情報をリアルタイムで表示するウェブベースのウィジェットです。
また、OBSと連携して録画開始時を起点としてタイムスタンプを記録する機能を持ちます。

## 仕様
コンセプトは「今日の成果」であり、起動時当日のジャーナル及び、起動中に増えたジャーナルを収集対象とします。

日付を跨いだ場合も収集を継続して集計に加算し続けます。日付を跨いだあとに再起動した場合、前日の統計は集計対象外となるので統計がリセットされます。

### 収集する統計情報
現在、以下の統計情報が収集・表示されます。

- **戦闘関連:**
  - 戦闘報酬の集計 (以下の総計)
    - 賞金額 (Bounty)
    - 戦闘貢献証券 (Combat Bond)
    - 1時間あたりの獲得賞金
  - ランク別撃墜数集計 (賞金首のみ)
  - 機種別撃墜数集計 (賞金首のみ)
- **交易関連**
  - コモディティの売却回数
  - 売却したコモディティの総数
  - 交易での損益
  - ROI(投資利益率)
  - 1トンあたりの利益
  - 1時間あたりの利益
- **マテリアル関連:**
  - カテゴリ別マテリアル収集数集計
  - 収集したマテリアル名と個数の一覧
- **探索関連:**
  - 総ジャンプ回数
  - 総ジャンプ距離
  - 総スキャン数
  - スキャンデータの推定価値
  - 高価値スキャン数
  - 第一発見数
  - スキャンインジケータ
    - FSSで星系内にELW, WW, AW, Terraformableを発見した場合に点灯
- **進行状況:**
  - 連邦/帝国ランク進行状況 (ログイン時、昇進時のみ)
  - 戦闘、交易、探索、CQCランク進行状況 (ログイン時、昇進時のみ)
  - 連邦/帝国/独立のミッション完了数


# セットアップ手順

1. **フォルダの作成:**
   任意の場所に `ed-dashboard` という名前の新しいフォルダを作成します。

2. **ファイルの構成:**
   作成したフォルダ内に、以下のファイルとフォルダを配置します。
   - `package.json` (プロジェクトの定義ファイル)
   - `server.js` (バックエンドサーバーのコード)
   - `src/journalProcessor.js` (ジャーナルの処理をするモジュール)
   - `src/utils.js` (ユーティリティ関数)
   - `src/constants.js` (定数の定義)
   - `public/index.html` (フロントエンドUIのコード)
   - `public/assets/style.css` (フロントエンドのスタイルシート)
   - `public/assets/main.js` (フロントエンドのJavaScript)
   - `public/assets/uiUpdater.js` (UIの更新をするモジュール)
   - `public/assets/websocketClient.js` (サーバとのWebSocket通信をするモジュール)

3. **ライブラリのインストール:**
   ターミナル（コマンドプロンプトやPowerShellなど）を開き、`ed-dashboard` フォルダに移動します。
   
   `cd path/to/ed-dashboard`

   そして、以下のコマンドを実行して、必要なライブラリをインストールします。

   `npm install`

4.  **OBSのWebSocket設定:**
    OBSのメニューから **[ツール] > [OBS WebSocket 設定]** を開き、**[WebSocketサーバーを有効にする]** にチェックを入れてください。パスワードを設定している場合は、そのパスワードを次のステップで利用します。

5.  **環境変数の設定:**
    プロジェクトのルートにある `.env.example` ファイルをコピーし、ファイル名を `.env` に変更します。
    OBSのWebSocketにパスワードを設定している場合は、`.env` ファイルを開き、`YOUR_PASSWORD_HERE` の部分を実際のパスワードに書き換えてください。

6.  **アプリケーションの起動:**
    ターミナルで `npm start` コマンドを実行するだけで、サーバーが起動します。
    ```bash
    npm start
    ```
    または、PowerShellスクリプトを実行します。
    ```powershell
    ./start-server.ps1
    ```

7. **ダッシュボードの表示:**
   ウェブブラウザを開き、アドレスバーに以下のURLを入力します。
   http://localhost:3000

   ブラウザにダッシュボードが表示され、ゲームをプレイするとリアルタイムで数値が更新されます。
